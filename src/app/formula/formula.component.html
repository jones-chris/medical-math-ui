<div>

  <br>

  <button routerLink="/"
          class="btn btn-success"
          [appHideFormulaCards]="false">
    Main Page
  </button>

  <br>

  <!--First, if the child formula has a parent-->
  <mat-icon *ngIf="formula.parentId"
            (click)="navigateToParentFormula(formula.parentId)"
            class="cursor-pointer upward-arrow">
    arrow_upward
  </mat-icon>

  <br>

  <b class="formula-name">{{ formula.name }} ( {{ formula.abbreviation }} )</b>

  <br>

  <div>
    <p [hidden]="hideResult"
       id="result">
      Result:  {{ result }}

      <mat-icon class="copy-icon cursor-pointer"
                (click)="copyResultToClipboard()">
        file_copy
      </mat-icon>
    </p>

    <p [hidden]="hideCopyMessage"
       class="copy-to-clipboard">
      Copied to Clipboard!
    </p>
  </div>

  <p [hidden]="!errorMessage">{{ errorMessage }}</p>

  <table>
    <tr *ngFor="let childFormula of formula.childFormulas">
      <td>
        {{ childFormula.name }}
      </td>
      <td>
        <input id="{{ childFormula.id }}"
               type="number"
               [(ngModel)]="childFormula.value"
        />
      </td>
      <td>
        <mat-icon *ngIf="childFormula.hasChildren"
                  (click)="navigateToChildFormula(childFormula.id)"
                  class="cursor-pointer">
          arrow_downward
        </mat-icon>
      </td>
    </tr>
  </table>

  <button class="btn btn-primary"
          (click)="calculate(); navigateToParentFormula(formula.parentId)">
    Calculate
  </button>

</div>
